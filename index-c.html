<!doctype html>
<head>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js">
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, 
                                   initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js">
    </script>
    <title>US Population Chart</title>
</head>
  <body>

    <div class ="chartBox">
        <canvas id="scatter-chart" width = "50" height="20"></canvas>
        <button onclick="getData()">Get Data </button>
        <button onclick="nextCity(-3, 3)"> Previous City</button>
        <button onclick="nextCity(4)"> Next City</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script>
    // fetch/get data block
            getData();
        
        async function getData() {
            const response = await fetch('https://api.json-generator.com/templates/eAX6PQ7qD8mW/data?access_token=68rhjxsz1p2xylbr8oqpqnl06cdcvmghz3318giq');
            console.log(response);
            const data = await response.json();
            console.log(data);
            length = data.length;
            console.log(length);
            
            ;

            labels = [];
            values = [];
            for (i = 0; i < length; i++) {
                labels.push(data[i].city);
                values.push(data[i].price);
            }
            console.log(values);
            console.log(labels);

            const myChart = new Chart(document.getElementById("bar-chart"), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: "Room Price: $",
                            backgroundColor: ["#3e95cd",
                                              "#8e5ea2", 
                                              "#3cba9f", 
                                              "#e8c3b9", 
                                              "#c45850",
                                              "#CD5C5C", 
                                              "#40E0D0",
                                              "#3e95cd",
                                              "#8e5ea2", 
                                              "#3cba9f", 
                                              "#e8c3b9", 
                                              "#c45850",
                                              "#CD5C5C", 
                                              "#40E0D0"],
                            data: values
                        }
                    ]
                },
                options: {
                    //scales: {
                        //x: {
                            //type: 'linear',
                            //position: 'bottom',
                           // min:1,
                           // max:4
                        //},
                       // y:{
                          //  beginAtZero: true
                       // }
                    //},
                    legend: { display: false },
                    title: {
                        display: true,
                        text: 'Hotels Price Average for one (1) Bedrrom'
                    }
                }
            });
            function nextCity(start, end){
                const startScale = myChart.options.scales.x.min + start;
                const endScale = mychart.options.scales.x.max + end;
                console.log(startScale + start);

                //whihc buton we click
                myChart.options.scales.x.min = startScale;
                myChart.options.scales.x.max = endScale;
                myChart.update();
            }
  
        }
  
    </script>
</body>
  
</html>
            
